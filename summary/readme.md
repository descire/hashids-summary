# summary

### 应用场景

    以 YouTube 的视频详情页为例：

```JavaScript
    https://www.youtube.com/watch?v=8dUpL8SCO1w
```

    每一个视频在数据库中都有一个唯一的主键，但是这里的 8dUpL8SCO1w 并不是主键。

```JavaScript
    https://www.youtube.com/watch?v=10002
```

    如果在视频详情的 URL 上直接暴露主键，这种情况很容易猜测到其为数据库主键。

> 通常情况下数据库主键都是自增数字，其优点体现在：1、占用空间小，节省CPU开销。2、通常会在主键上建立索引，整形索引可以更多的载入内存，从而提高性能。

    从而很轻松地爬取整个站的视频，那么如何保护数据库主键，从而避免这样的问题呢？

### 解决思路


     Fisher–Yates shuffle 算法是一个用来将有限集合生成一个随机排列的算法，并且是等概率的（为什么？），并且高效（为什么?）

    等概率：以 a、b、c 为例

    第一次取出 a 的概率为 1/3
    第二次取出 b 的概率为 2/3 * 1/2 = 1/3

    以此类推

    高效：时间复杂度 O(n) 空间复杂度 O(1)

     - 得到一个 [1, ..., N] 的数组
     - 在当前区间中获取一个随机数 K
     - 从低位开始，得到第 K 个数字，把它放在一个列表的最后一位
     - 重复第二步，直到所有的数字都被取出
     - 第三步写出的序列就是原始数组的随机序列

     如果第二步是真随机，那么得到的序列就是随机的（Math.random 随机数种子是固定的，所以是伪随机）
    

### 实现原理

### 参考资料

- https://gaohaoyang.github.io/2016/10/16/shuffle-algorithm/
- https://meantobe.github.io/2019/12/11/hashids/